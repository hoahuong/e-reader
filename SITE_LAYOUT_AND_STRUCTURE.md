# ğŸ“ Bá»‘ cá»¥c vÃ  Cáº¥u trÃºc Site - PDF Reader App

## ğŸ—ï¸ Tá»•ng quan Kiáº¿n trÃºc

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    App Header                           â”‚
â”‚  [Title] [Language Selector] [Upload PDF Button]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                               â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚  Home   â”‚                    â”‚  PDF    â”‚
   â”‚  Screen â”‚                    â”‚ Viewer  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Routes (Multi-language)              â”‚
   â”‚  /vi/ hoáº·c /en/                       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â€¢ / (Home)                           â”‚
   â”‚  â€¢ /drive (Google Drive)              â”‚
   â”‚  â€¢ /uploaded-list (File Manager)      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“„ CÃ¡c Trang (Routes)

### 1. **Home Page** (`/` hoáº·c `/vi/` hoáº·c `/en/`)

**Má»¥c Ä‘Ã­ch:** Trang chá»§ vá»›i cÃ¡c lá»±a chá»n chÃ­nh

**Bá»‘ cá»¥c:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Welcome Screen              â”‚
â”‚                                     â”‚
â”‚  ğŸ‘‹ ChÃ o má»«ng Ä‘áº¿n PDF Reader       â”‚
â”‚  MÃ´ táº£ á»©ng dá»¥ng...                 â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ğŸ“ Uploadâ”‚  â”‚â˜ï¸ Drive  â”‚       â”‚
â”‚  â”‚   PDF    â”‚  â”‚  View    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ğŸ“‹ Manage â”‚                      â”‚
â”‚  â”‚  Files   â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                     â”‚
â”‚  âœ¨ TÃ­nh nÄƒng:                      â”‚
â”‚  â€¢ Upload PDF                       â”‚
â”‚  â€¢ Quáº£n lÃ½ files                    â”‚
â”‚  â€¢ Google Drive                     â”‚
â”‚  â€¢ Äá»c PDF                          â”‚
â”‚  â€¢ Ghi chÃº                          â”‚
â”‚  â€¢ ...                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**TÃ­nh nÄƒng:**
- âœ… Upload PDF button (má»Ÿ file picker)
- âœ… Navigate to Google Drive View
- âœ… Navigate to File Manager
- âœ… Upload Modal vá»›i:
  - Catalog Selector
  - Drive Folder Selector (Má»šI)
  - Upload button

---

### 2. **Google Drive View** (`/drive`)

**Má»¥c Ä‘Ã­ch:** Xem vÃ  chá»n PDF tá»« Google Drive

**Bá»‘ cá»¥c:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Back to Home    â˜ï¸ Google Drive â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  [Login Button] (náº¿u chÆ°a login)   â”‚
â”‚                                     â”‚
â”‚  Hoáº·c:                              â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Navigation Tabs:             â”‚   â”‚
â”‚  â”‚ [My Drive] [Shared Drives]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ View Mode:                  â”‚   â”‚
â”‚  â”‚ [ğŸ“ Folders] [ğŸ“„ All]      â”‚   â”‚
â”‚  â”‚ [â­ Starred] [ğŸ•’ Recent]    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Folder Tree:                â”‚   â”‚
â”‚  â”‚ ğŸ“ Folder 1                 â”‚   â”‚
â”‚  â”‚   ğŸ“ Subfolder 1.1          â”‚   â”‚
â”‚  â”‚   ğŸ“ Subfolder 1.2          â”‚   â”‚
â”‚  â”‚ ğŸ“ Folder 2                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ PDF Files List:            â”‚   â”‚
â”‚  â”‚ ğŸ“„ file1.pdf               â”‚   â”‚
â”‚  â”‚ ğŸ“„ file2.pdf               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**TÃ­nh nÄƒng:**
- âœ… Google OAuth Login
- âœ… List folders (tree structure)
- âœ… List PDF files
- âœ… Navigate folders
- âœ… Select vÃ  Ä‘á»c PDF
- âœ… View modes: Folders, All, Starred, Recent, Trash
- âœ… Search files
- âœ… Sort files

---

### 3. **File Manager** (`/uploaded-list`)

**Má»¥c Ä‘Ã­ch:** Quáº£n lÃ½ files Ä‘Ã£ upload vÃ  catalogs

**Bá»‘ cá»¥c:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Back    ğŸ“‹ Quáº£n lÃ½ Files        â”‚
â”‚            [ğŸ”„ Sync Button]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Catalog List:                â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ğŸ“‚ Books  â”‚ â”‚ğŸ“‚ Docs   â”‚ â”‚   â”‚
â”‚  â”‚ â”‚  (5)     â”‚ â”‚  (3)     â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚ [+ Táº¡o catalog má»›i]        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Files trong Catalog:        â”‚   â”‚
â”‚  â”‚ ğŸ“„ file1.pdf                â”‚   â”‚
â”‚  â”‚ ğŸ“„ file2.pdf                â”‚   â”‚
â”‚  â”‚ [Drag & Drop Ä‘á»ƒ di chuyá»ƒn]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**TÃ­nh nÄƒng:**
- âœ… List catalogs
- âœ… Create/Edit/Delete catalogs
- âœ… Reorder catalogs (drag & drop)
- âœ… List files trong má»—i catalog
- âœ… Move files giá»¯a catalogs (drag & drop)
- âœ… Delete files
- âœ… Manual sync button
- âœ… Filter by catalog

---

### 4. **PDF Viewer** (Khi Ä‘ang Ä‘á»c PDF)

**Má»¥c Ä‘Ã­ch:** Äá»c vÃ  annotate PDF

**Bá»‘ cá»¥c:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Back    ğŸ“„ filename.pdf    ğŸ’¾ğŸ“¥ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚         PDF Content Area            â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚      PDF Pages              â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚  [Text Selection]          â”‚   â”‚
â”‚  â”‚  [Highlight]                â”‚   â”‚
â”‚  â”‚  [Annotations]               â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  [â—€ Prev]  Page 1/10  [Next â–¶]     â”‚
â”‚                                     â”‚
â”‚  [Zoom Controls]                   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**TÃ­nh nÄƒng:**
- âœ… Äá»c PDF vá»›i PDF.js
- âœ… Text selection
- âœ… Highlight text
- âœ… Add annotations/notes
- âœ… Zoom in/out
- âœ… Page navigation
- âœ… Keyboard shortcuts
- âœ… Reading progress
- âœ… Export/Import annotations

---

## ğŸ§© Components

### **Core Components:**

1. **PDFViewerDirect.jsx**
   - PDF viewer chÃ­nh
   - Text selection, highlight, annotations
   - Zoom, navigation
   - Keyboard shortcuts

2. **GoogleDriveViewer.jsx**
   - Google Drive integration
   - Folder navigation
   - File listing vÃ  selection
   - Multiple view modes

3. **FileManager.jsx**
   - Quáº£n lÃ½ catalogs vÃ  files
   - Drag & drop
   - CRUD operations
   - Sync vá»›i cloud

4. **CatalogSelector.jsx**
   - Chá»n catalog khi upload
   - Táº¡o catalog má»›i
   - Suggest catalog tá»« filename

5. **DriveFolderSelector.jsx** â­ Má»šI
   - Chá»n folder Google Drive khi upload
   - Táº¡o folder má»›i
   - Tree structure view

6. **LanguageSelector.jsx**
   - Chuyá»ƒn Ä‘á»•i ngÃ´n ngá»¯ (Vi/En)
   - LÆ°u preference

---

## ğŸ”„ User Flows

### **Flow 1: Upload PDF tá»« mÃ¡y tÃ­nh**

```
1. Home Page
   â†“
2. Click "ğŸ“ Upload PDF"
   â†“
3. Chá»n file PDF tá»« mÃ¡y tÃ­nh
   â†“
4. Upload Modal má»Ÿ:
   - Chá»n Catalog (trong app)
   - Chá»n Drive Folder (trÃªn Google Drive) â­ Má»šI
   - CÃ³ thá»ƒ táº¡o folder má»›i â­ Má»šI
   â†“
5. Click "Upload"
   â†“
6. File Ä‘Æ°á»£c upload lÃªn Google Drive vÃ o folder Ä‘Ã£ chá»n
   â†“
7. Metadata Ä‘Æ°á»£c lÆ°u vÃ o Vercel KV â­ Má»šI
   â†“
8. File hiá»ƒn thá»‹ trong File Manager
   â†“
9. CÃ³ thá»ƒ Ä‘á»c ngay hoáº·c Ä‘á»c sau
```

### **Flow 2: Äá»c PDF tá»« Google Drive**

```
1. Home Page
   â†“
2. Click "â˜ï¸ Google Drive"
   â†“
3. ÄÄƒng nháº­p Google (náº¿u chÆ°a)
   â†“
4. Navigate folders
   â†“
5. Chá»n PDF file
   â†“
6. PDF Viewer má»Ÿ
   â†“
7. Äá»c vÃ  annotate
```

### **Flow 3: Quáº£n lÃ½ Files**

```
1. Home Page
   â†“
2. Click "ğŸ“‹ Manage Files"
   â†“
3. File Manager má»Ÿ:
   - Xem catalogs
   - Xem files trong má»—i catalog
   â†“
4. CÃ³ thá»ƒ:
   - Táº¡o catalog má»›i
   - Di chuyá»ƒn files (drag & drop)
   - XÃ³a files
   - Sync vá»›i cloud
```

---

## ğŸ’¾ Data Storage

### **PDF Files:**
- **Google Drive** (Cloud) â­ Má»šI
  - 15 GB free
  - Tá»• chá»©c theo folders
  - Sync giá»¯a thiáº¿t bá»‹

- **IndexedDB** (Local Browser)
  - Fallback náº¿u chÆ°a login Google
  - Cache metadata

### **Metadata (Catalogs, File List):**
- **Vercel KV/Redis** (Cloud) â­ Má»šI
  - 30K reads/day, 30K writes/day free
  - Low latency (< 1ms)
  - Sync giá»¯a thiáº¿t bá»‹

- **IndexedDB** (Local Browser)
  - Cache metadata
  - Load nhanh

### **Annotations:**
- **localStorage** (Local Browser)
  - Key: `pdf-annotations-{filename}`
  - Export/Import JSON

---

## ğŸ¨ UI/UX Features

### **Responsive Design:**
- âœ… Mobile-friendly
- âœ… Tablet support
- âœ… Desktop optimized

### **Language Support:**
- âœ… Tiáº¿ng Viá»‡t (default)
- âœ… English
- âœ… URL-based routing (`/vi/`, `/en/`)

### **Accessibility:**
- âœ… Keyboard navigation
- âœ… Screen reader support
- âœ… High contrast mode

### **Performance:**
- âœ… Lazy loading
- âœ… Code splitting
- âœ… Optimized PDF rendering

---

## ğŸ” Authentication & Authorization

### **Google OAuth:**
- âœ… Client-side OAuth flow
- âœ… Access token management
- âœ… Auto logout khi token expire

### **Scopes:**
- `drive.readonly` - Äá»c files
- `drive.file` - Upload files â­ Má»šI

---

## ğŸ“± Mobile Experience

### **Optimizations:**
- âœ… Touch gestures
- âœ… Swipe navigation
- âœ… Mobile-friendly modals
- âœ… Responsive layouts
- âœ… Scroll optimization

---

## ğŸš€ TÃ­nh nÄƒng Má»›i ÄÃ£ ThÃªm

### **1. Google Drive Upload** â­
- Upload PDF vÃ o folder cá»¥ thá»ƒ trÃªn Google Drive
- Chá»n folder khi upload
- Táº¡o folder má»›i trá»±c tiáº¿p trong app

### **2. Folder Management** â­
- Xem tree structure cá»§a folders
- Expand/collapse folders
- Táº¡o folder má»›i
- LÆ°u folder preference

### **3. Vercel KV Metadata Sync** â­
- Metadata sync vá»›i Vercel KV/Redis
- Low latency, khÃ´ng timeout
- Free tier Ä‘á»§ dÃ¹ng

---

## ğŸ“Š Component Hierarchy

```
App
â”œâ”€â”€ Header (khi khÃ´ng Ä‘á»c PDF)
â”‚   â”œâ”€â”€ Title
â”‚   â”œâ”€â”€ LanguageSelector
â”‚   â””â”€â”€ Upload Button
â”‚
â”œâ”€â”€ Header Minimal (khi Ä‘á»c PDF)
â”‚   â”œâ”€â”€ Back Button
â”‚   â”œâ”€â”€ File Name
â”‚   â””â”€â”€ Export/Import Buttons
â”‚
â””â”€â”€ Main Content
    â”œâ”€â”€ Routes
    â”‚   â”œâ”€â”€ Home (/)
    â”‚   â”‚   â”œâ”€â”€ Welcome Screen
    â”‚   â”‚   â”œâ”€â”€ Upload Modal
    â”‚   â”‚   â”‚   â”œâ”€â”€ CatalogSelector
    â”‚   â”‚   â”‚   â””â”€â”€ DriveFolderSelector â­
    â”‚   â”‚   â””â”€â”€ Feature List
    â”‚   â”‚
    â”‚   â”œâ”€â”€ Google Drive (/drive)
    â”‚   â”‚   â””â”€â”€ GoogleDriveViewer
    â”‚   â”‚       â”œâ”€â”€ Login Button
    â”‚   â”‚       â”œâ”€â”€ Navigation Tabs
    â”‚   â”‚       â”œâ”€â”€ Folder Tree
    â”‚   â”‚       â””â”€â”€ File List
    â”‚   â”‚
    â”‚   â””â”€â”€ File Manager (/uploaded-list)
    â”‚       â””â”€â”€ FileManager
    â”‚           â”œâ”€â”€ Catalog List
    â”‚           â”œâ”€â”€ File List
    â”‚           â””â”€â”€ Sync Button
    â”‚
    â””â”€â”€ PDF Viewer (khi Ä‘á»c)
        â””â”€â”€ PDFViewerDirect
            â”œâ”€â”€ PDF Canvas
            â”œâ”€â”€ Text Layer
            â”œâ”€â”€ Annotation Layer
            â”œâ”€â”€ Controls
            â””â”€â”€ Sidebar (náº¿u cÃ³)
```

---

## ğŸ¯ Navigation Structure

```
Home (/)
â”œâ”€â”€ Upload PDF â†’ Upload Modal
â”œâ”€â”€ Google Drive (/drive) â†’ GoogleDriveViewer
â””â”€â”€ Manage Files (/uploaded-list) â†’ FileManager

Google Drive (/drive)
â”œâ”€â”€ Login â†’ Google OAuth
â”œâ”€â”€ Navigate Folders â†’ Select PDF
â””â”€â”€ Back to Home

File Manager (/uploaded-list)
â”œâ”€â”€ View Catalogs
â”œâ”€â”€ Manage Files
â”œâ”€â”€ Sync â†’ Cloud Sync
â””â”€â”€ Back to Home

PDF Viewer (khi Ä‘á»c)
â”œâ”€â”€ Back â†’ Return to previous page
â”œâ”€â”€ Export Annotations
â””â”€â”€ Import Annotations
```

---

## ğŸ“ Key Features Summary

### **Core Features:**
- âœ… Upload PDF tá»« mÃ¡y tÃ­nh
- âœ… Upload PDF lÃªn Google Drive vÃ o folder cá»¥ thá»ƒ â­
- âœ… Äá»c PDF tá»« Google Drive
- âœ… Quáº£n lÃ½ catalogs vÃ  files
- âœ… Text selection vÃ  highlight
- âœ… Annotations/notes
- âœ… Zoom vÃ  navigation
- âœ… Export/Import annotations

### **Storage:**
- âœ… PDF Files â†’ Google Drive (15 GB free) â­
- âœ… Metadata â†’ Vercel KV/Redis (30K ops/day free) â­
- âœ… Annotations â†’ localStorage

### **Sync:**
- âœ… Metadata sync giá»¯a thiáº¿t bá»‹ (Vercel KV) â­
- âœ… PDF files sync (Google Drive) â­
- âœ… Folder preference (localStorage)

---

## ğŸ¨ Design Patterns

### **State Management:**
- React useState/useEffect
- localStorage cho preferences
- IndexedDB cho local cache
- Cloud sync cho metadata

### **Routing:**
- React Router vá»›i language prefix
- URL-based navigation
- Browser history support

### **Error Handling:**
- Try-catch blocks
- User-friendly error messages
- Fallback mechanisms
- Retry logic

---

## ğŸ“± Responsive Breakpoints

- **Mobile:** < 768px
- **Tablet:** 768px - 1024px
- **Desktop:** > 1024px

---

## ğŸ”„ Data Flow

```
User Action
    â†“
Component Handler
    â†“
Service Function (googleDrive.js, pdfStorage.js)
    â†“
API Route (náº¿u cáº§n)
    â†“
Cloud Storage (Google Drive / Vercel KV)
    â†“
Update Local State
    â†“
Re-render UI
```

---

## ğŸ¯ User Journey Map

### **Scenario 1: Upload vÃ  Ä‘á»c PDF má»›i**
1. VÃ o Home â†’ Click Upload
2. Chá»n file â†’ Chá»n catalog â†’ Chá»n Drive folder â­
3. Upload â†’ File lÆ°u trÃªn Drive
4. Tá»± Ä‘á»™ng má»Ÿ PDF Viewer
5. Äá»c vÃ  annotate

### **Scenario 2: Äá»c PDF tá»« Drive**
1. VÃ o Home â†’ Click Google Drive
2. Login Google
3. Navigate folders â†’ Chá»n PDF
4. Äá»c vÃ  annotate

### **Scenario 3: Quáº£n lÃ½ files**
1. VÃ o Home â†’ Click Manage Files
2. Xem catalogs vÃ  files
3. Táº¡o catalog má»›i hoáº·c di chuyá»ƒn files
4. Sync vá»›i cloud

---

## ğŸš€ Performance Optimizations

- âœ… Lazy loading components
- âœ… Code splitting
- âœ… Image optimization
- âœ… PDF rendering optimization
- âœ… Debounced search
- âœ… Virtual scrolling (náº¿u cáº§n)

---

## ğŸ“š File Structure

```
src/
â”œâ”€â”€ App.jsx (Main app, routing)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ PDFViewerDirect.jsx
â”‚   â”œâ”€â”€ GoogleDriveViewer.jsx
â”‚   â”œâ”€â”€ FileManager.jsx
â”‚   â”œâ”€â”€ CatalogSelector.jsx
â”‚   â”œâ”€â”€ DriveFolderSelector.jsx â­
â”‚   â””â”€â”€ LanguageSelector.jsx
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ googleDrive.js
â”‚   â””â”€â”€ googleDriveRedirect.js
â”œâ”€â”€ pdfStorage.js
â”œâ”€â”€ catalogManager.js
â”œâ”€â”€ metadataSyncConfig.js
â”œâ”€â”€ metadataSyncKV.js â­
â””â”€â”€ i18n/
    â””â”€â”€ locales.js

api/
â”œâ”€â”€ upload-pdf-google-drive.js â­
â”œâ”€â”€ kv-metadata.js â­
â””â”€â”€ github-metadata.js
```

---

## ğŸ‰ Káº¿t luáº­n

App Ä‘Ã£ Ä‘Æ°á»£c cáº£i thiá»‡n vá»›i:
- âœ… Google Drive storage cho PDF files
- âœ… Vercel KV cho metadata sync
- âœ… Folder management UI
- âœ… TÃ­ch há»£p hoÃ n chá»‰nh giá»¯a cÃ¡c components

**Chi phÃ­:** $0/month (free tier Ä‘á»§ dÃ¹ng)
**Hiá»‡u nÄƒng:** Tá»‘t, khÃ´ng timeout
**User Experience:** Tá»‘t, dá»… sá»­ dá»¥ng
